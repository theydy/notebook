(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{375:function(t,a,s){"use strict";s.r(a);var e=s(44),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"前端安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端安全"}},[t._v("#")]),t._v(" 前端安全")]),t._v(" "),s("h2",{attrs:{id:"xss-跨域脚本攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xss-跨域脚本攻击"}},[t._v("#")]),t._v(" XSS（跨域脚本攻击）")]),t._v(" "),s("p",[t._v("攻击方式：通过评论执行代码，通过 GET 请求的参数执行代码")]),t._v(" "),s("p",[t._v("防御措施：对于用户输入进行转码过滤，开启 HttpOnly 禁止 js 读取 cookie，开启 CSP 内容安全策略。")]),t._v(" "),s("h3",{attrs:{id:"csp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#csp"}},[t._v("#")]),t._v(" CSP")]),t._v(" "),s("p",[t._v("设置 CSP 的方法有两种，")]),t._v(" "),s("h4",{attrs:{id:"前端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端"}},[t._v("#")]),t._v(" 前端")]),t._v(" "),s("p",[t._v("在html 里加上 "),s("code",[t._v("<meta>")]),t._v(" 标签")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Content-Security-Policy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("script-src "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("; object-src "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("none"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("; style-src "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(" cdn.example.org third-party.org; child-src https:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h4",{attrs:{id:"后端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后端"}},[t._v("#")]),t._v(" 后端")]),t._v(" "),s("p",[t._v("在 response header 里加上 Content-Security-Policy 字段")]),t._v(" "),s("p",[s("strong",[t._v("需要注意⚠️")]),t._v("：如果在调试时，本地npm run serve 启服务服务端其实是 node，然后把 api 请求接口代理到后台服务器，\n这时候即使后台配置了 CSP 也是无效的，要以 node 服务器配置的 CSP 为准，但是一般来说 node 都不会配 CSP，所以\n要注意出现本地调试没问题，上到测试环境凉凉的情况。")]),t._v(" "),s("h2",{attrs:{id:"csrf-跨域请求伪造"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#csrf-跨域请求伪造"}},[t._v("#")]),t._v(" CSRF（跨域请求伪造）")]),t._v(" "),s("p",[t._v("攻击方式：自动向其他域名发送 GET / POST 请求")]),t._v(" "),s("p",[t._v("防御措施：利用 Cookie 的 SameSite 属性，限制请求携带 Cookie，通过 Origin 和 Referrer 验证来源站点，请求加上 CSRF token")]),t._v(" "),s("h3",{attrs:{id:"samesite"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#samesite"}},[t._v("#")]),t._v(" SameSite")]),t._v(" "),s("ul",[s("li",[t._v("Strict：最为严格，完全禁止第三方 Cookie，跨站点时，任何情况下都不会发送 Cookie。")]),t._v(" "),s("li",[t._v("Lax：导航到目标网址的 Get 请求（链接，预加载请求，GET 表单）才会携带 Cookie。")]),t._v(" "),s("li",[t._v("None：无设置")])])])}),[],!1,null,null,null);a.default=r.exports}}]);