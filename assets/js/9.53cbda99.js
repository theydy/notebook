(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{368:function(t,e,a){"use strict";a.r(e);var n=a(44),s=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"npm-包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-包"}},[t._v("#")]),t._v(" npm 包")]),t._v(" "),a("h2",{attrs:{id:"package-json-字段记录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#package-json-字段记录"}},[t._v("#")]),t._v(" package.json 字段记录")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.npmjs.com/cli/v8/configuring-npm/package-json",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm package.json 文档"),a("OutboundLink")],1)]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("字段")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("用途")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("name")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("项目名")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("version")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("项目版本")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("description")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("项目描述")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("keywords")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("项目关键字")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("homepage")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("略")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("bugs")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("略")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("license")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("使用协议")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("files")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("发布项目时导出的文件列表，使用 glob 语法，"),a("code",[t._v("package.json")]),t._v("、"),a("code",[t._v("README")]),t._v("、"),a("code",[t._v("LICENSE / LICENCE")]),t._v("、"),a("code",[t._v("main 字段指向的文件")]),t._v(" 这些文件优先级是高于 files 字段的。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("main")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("默认入口文件")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("module")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("做为一个 ES Module 模块被加载时的入口文件，如果没有会降级使用 main")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("browser")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("指明浏览器环境下的入口文件，此时 browser 优先级高于 main")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("bin")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("项目提供终端中可使用的命令和对应的执行文件")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("type")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("项目内使用哪种模块规范")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("directories")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("略")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("repository")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("略")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("scripts")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("执行 npm 脚本的命令简写")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("dependencies")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("生产环境下，项目运行所需依赖")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("devDependencies")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("开发环境下，项目运行所需依赖")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("peerDependencies")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("使用项目需要预先安装的依赖")])])])]),t._v(" "),a("h2",{attrs:{id:"包管理工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#包管理工具"}},[t._v("#")]),t._v(" 包管理工具")]),t._v(" "),a("ul",[a("li",[t._v("npm")]),t._v(" "),a("li",[t._v("yarn")]),t._v(" "),a("li",[t._v("pnpm")])]),t._v(" "),a("h3",{attrs:{id:"npm-和-yarn-的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-和-yarn-的区别"}},[t._v("#")]),t._v(" npm 和 yarn 的区别")]),t._v(" "),a("ul",[a("li",[t._v("yarn 下载速度比 npm 快：yarn 有并行安装和离线模式（下载过的包从缓存拿）")]),t._v(" "),a("li",[t._v("yarn 安装版本统一：yarn 有 lock 文件，但是新版 npm 也有了")]),t._v(" "),a("li",[t._v("yarn 的语义化更好")])]),t._v(" "),a("h3",{attrs:{id:"pnpm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm"}},[t._v("#")]),t._v(" pnpm")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://pnpm.io/zh/",target:"_blank",rel:"noopener noreferrer"}},[t._v("pnpm 文档"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("pnpm 的核心是将所有的包都存放在一个资源仓库中，而每个项目的 node_modules 通过软链接的形式将包链接到资源仓库中，这样不仅节省了空间，同时也加快了安装速度")]),t._v(" "),a("p",[t._v("pnpm 的优点：")]),t._v(" "),a("ul",[a("li",[t._v("包安装速度极快")]),t._v(" "),a("li",[t._v("磁盘空间利用非常高效：使用硬链接和软链接来避免复制所有本地缓存源文件，不会重复安装同一个包")]),t._v(" "),a("li",[t._v("支持 monorepo：npm 或 yarn 需要配合 learn 等三方库才支持 monorepo")]),t._v(" "),a("li",[t._v("node_module 不是扁平结构：避免了幽灵依赖（即：未在 dependencies 里声明依赖，但代码里使用了这个包）")])]),t._v(" "),a("p",[t._v("npm yarn 之所以会有依赖提升，即使用扁平结构，是为了减少 node_modules 的层级嵌套过深。")]),t._v(" "),a("ul",[a("li",[t._v("软链接：存储另一个硬链接的地址的链接")]),t._v(" "),a("li",[t._v("硬链接：指向对应文件的 inode（index node） 的链接")])]),t._v(" "),a("p",[a("strong",[t._v("使用")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 升级 pnpm")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -g "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 动态包执行，等同与 npx")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" dlx xxx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 等同与 npm install")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 等同与 npm i xxx")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" xxx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 等同与 npm run <cmd>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("cmd"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[a("a",{attrs:{href:"https://pnpm.io/zh/workspaces",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("pnpn 使用 workspace")]),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("根目录下创建 "),a("code",[t._v("pnpm-workspace.yaml")])])]),t._v(" "),a("div",{staticClass:"language-code extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("packages:\n  # all packages in subdirs of packages/ and components/\n  - 'packages/**'\n  - 'components/**'\n  # exclude packages that are inside test directories\n  - '!**/test/**'\n")])])]),a("ul",[a("li",[t._v("在 workspace 根目录使用 pnpm install 命令时，会自动将 workspace 中的所有项目执行 pnpm install")]),t._v(" "),a("li",[t._v("pnpm 支持协议 workspace:，当使用这个协议时，pnpm 只会解析本地 workspace 中的包")])]),t._v(" "),a("div",{staticClass:"language-code extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('"foo": "workspace:*"\n"foo": "workspace:../foo"\n"foo": "workspace:~",\n"foo": "workspace:^",\n"zoo": "workspace:^1.5.0"\n')])])]),a("ul",[a("li",[t._v("当需要发布包时，使用 pnpm pack 或者 pnpm publish 命令时，将动态的把 workspace: 协议替换为真正的版本号")])])])}),[],!1,null,null,null);e.default=s.exports}}]);